(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[666],{8338:(e,s,r)=>{Promise.resolve().then(r.bind(r,7651)),Promise.resolve().then(r.bind(r,6738))},7651:(e,s,r)=>{"use strict";r.d(s,{default:()=>u});var a=r(5155),t=r(3312),i=r(5732),n=r(6813),d=r(8418),l=r(2115);r(2252),r(1996);var c=r(5476),o=r(3628);let m=e=>{var s,r,t;let{poster:i}=e,[n,d]=(0,l.useState)(0);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"md:hidden min-w-0",children:(0,a.jsx)(o.RC,{scrollbar:{},slidesPerView:1,spaceBetween:10,modules:[c.Ze],children:null==i?void 0:null===(s=i.images)||void 0===s?void 0:s.map(e=>(0,a.jsx)(o.qr,{children:(0,a.jsx)("img",{alt:null==i?void 0:i.name,className:"w-full h-[500px] object-cover",src:e})},e))})}),(0,a.jsxs)("div",{className:"max-md:hidden",children:[(0,a.jsx)("img",{className:"w-full xl:h-[700px] lg:h-[600px] h-[500px] object-cover",src:null==i?void 0:null===(r=i.images)||void 0===r?void 0:r[n],alt:null==i?void 0:i.name}),(0,a.jsx)("div",{className:"grid grid-cols-5 gap-5 mt-10",children:null==i?void 0:null===(t=i.images)||void 0===t?void 0:t.map((e,s)=>(0,a.jsx)("img",{src:e,onClick:()=>d(s),alt:null==i?void 0:i.name,className:"w-full aspect-square object-cover ".concat(n==s?"opacity-100":"opacity-40"," hover:opacity-100 cursor-pointer")},e))})]})]})};function u(e){var s,r;let{poster:c}=e,{cartList:o,add:u}=(0,i.A)(),[p,g]=(0,l.useState)(0),[v,h]=(0,l.useState)(0),x=n.A.isInCart({_id:c._id,dimensionId:c.dimensions[p]._id,frameId:c.frames[v]._id},o),f=d.A.calculatePosterPrice(c,p,v);return(0,a.jsx)("section",{className:"",children:(0,a.jsx)("div",{className:"container pb-20",children:(0,a.jsxs)("div",{className:"grid lg:grid-cols-2 lg:gap-20 gap-10",children:[(0,a.jsx)(m,{poster:c}),(0,a.jsxs)("div",{className:"",children:[(0,a.jsxs)("h1",{className:"heading-2 text-main",children:["Постер ",null==c?void 0:c.name]}),(0,a.jsxs)("div",{className:"mt-5 heading-3 font-normal",children:[f," руб."]}),(0,a.jsxs)("div",{className:"mt-5",children:[(0,a.jsx)("p",{className:"heading-4",children:"Размеры:"}),(0,a.jsx)("div",{className:"mt-2 flex gap-3 flex-wrap",children:null==c?void 0:null===(s=c.dimensions)||void 0===s?void 0:s.map((e,s)=>(0,a.jsx)(t.$,{className:"text-base",onClick:()=>g(s),variant:s==p?"default":"outline",children:null==e?void 0:e.name},e._id))})]}),(0,a.jsxs)("div",{className:"mt-5",children:[(0,a.jsx)("p",{className:"heading-4",children:"Рамки:"}),(0,a.jsx)("div",{className:"mt-2 flex gap-3 flex-wrap",children:null==c?void 0:null===(r=c.frames)||void 0===r?void 0:r.map((e,s)=>(0,a.jsx)(t.$,{className:"text-base",onClick:()=>h(s),variant:s==v?"default":"outline",children:null==e?void 0:e.name},e._id))})]}),(0,a.jsx)("p",{className:"mt-10 text-body-lg whitespace-pre-wrap",children:null==c?void 0:c.description}),x?(0,a.jsx)(t.$,{className:"mt-5 w-full",size:"xl",asChild:!0,children:(0,a.jsx)("a",{href:"/cart",children:"Перейти в корзину"})}):(0,a.jsx)(t.$,{className:"mt-5 w-full",size:"xl",onClick:()=>{(null==c?void 0:c._id)&&u({_id:c._id,dimensionId:c.dimensions[p]._id,frameId:c.frames[v]._id})},children:"Добавить в корзину"})]})]})})})}},6738:(e,s,r)=>{"use strict";r.d(s,{default:()=>l});var a=r(5155),t=r(5169),i=r(4119),n=r(5605),d=r(547);function l(e){let{poster:s}=e,{posters:r,isLoading:l}=function(e){let{data:s,isLoading:r,isError:a,error:t}=(0,d.I)({queryKey:["poster",e._id],queryFn:async()=>{var s;return await n.A.getByCategories(null==e?void 0:null===(s=e.categories)||void 0===s?void 0:s.map(e=>e.slug))}});return{posters:s,isLoading:r,isError:a,error:t}}(s);return l?(0,a.jsx)(t.A,{}):(0,a.jsx)("section",{children:(0,a.jsxs)("div",{className:"container pb-20",children:[(0,a.jsx)("h2",{className:"heading-2 border-b-2 border-solid",children:"Похожие постеры"}),(0,a.jsx)(i.A,{className:"mt-[30px]",posters:r})]})})}},3312:(e,s,r)=>{"use strict";r.d(s,{$:()=>c,r:()=>l});var a=r(5155),t=r(2317),i=r(1027),n=r(2115),d=r(1567);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",outlineBold:"border-2 border-primary bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9",xl:"md:py-4 md:px-8 py-3 px-6 rounded-md text-lg"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,s)=>{let{className:r,variant:i,size:n,asChild:c=!1,...o}=e,m=c?t.DX:"button";return(0,a.jsx)(m,{className:(0,d.cn)(l({variant:i,size:n,className:r})),ref:s,...o})});c.displayName="Button"},5169:(e,s,r)=>{"use strict";r.d(s,{A:()=>i});var a=r(5155),t=r(4505);function i(){return(0,a.jsx)("section",{className:"py-[250px]",children:(0,a.jsx)("div",{className:"container flex justify-center",children:(0,a.jsx)(t.A,{className:"animate-spin",size:60})})})}},4119:(e,s,r)=>{"use strict";r.d(s,{A:()=>d});var a=r(5155),t=r(8173),i=r.n(t);let n=e=>{let{poster:s,className:r}=e;return(0,a.jsxs)(i(),{href:"/poster/".concat(s.slug),className:"group/product flex flex-col h-fit hover:scale-105 active:opacity-60 transition-all duration-300 relative ".concat(r," "),children:[(0,a.jsx)("img",{className:"absolute inset-0 w-full object-cover md:h-[400px] h-[250px] group-hover/product:h-full group-hover/product:opacity-80 group-hover/product:shadow-lg group-active:opacity-60 active:opacity-60 transition-all duration-300",src:s.images[0],alt:s.name}),(0,a.jsx)("div",{className:"md:mt-[400px] mt-[250px] py-3 relative z-10 transition-all duration-300 group-hover/product:p-3 group-hover/product:gap-4",children:(0,a.jsx)("p",{className:"text-body text-right",children:s.name})})]})};function d(e){let{className:s,posters:r}=e;return(0,a.jsx)("div",{className:"".concat(s," grid xl:grid-cols-4 lg:grid-cols-3 grid-cols-2 md:gap-x-[30px] md:gap-y-[50px] gap-x-5 gap-y-8"),children:null==r?void 0:r.map(e=>(0,a.jsx)(n,{poster:e},e.slug))})}},1567:(e,s,r)=>{"use strict";r.d(s,{cn:()=>i});var a=r(3463),t=r(9795);function i(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return(0,t.QP)((0,a.$)(s))}},5605:(e,s,r)=>{"use strict";r.d(s,{A:()=>o});let a=(0,r(7096).UU)({projectId:"b3q2ag62",dataset:"production",useCdn:!0,apiVersion:"2023-05-03"}),t=e=>""==e?"*[_type == 'poster']{\n    _id, name, slug, \"images\": images[].asset->url\n  }":"*[_type == 'poster' && '".concat(e,'\' in categories[]->slug]{\n  _id, name, slug, "images": images[].asset->url\n}'),i=e=>"*[_type == 'poster' && _id == '".concat(e._id,"'\n   && count(dimensions[_ref == '").concat(e.dimensionId,"']) > 0\n   && count(frames[_ref == '").concat(e.frameId,'\']) > 0][0]{\n  _id, name, slug, description,\n  "images": images[].asset->url,\n  "categories": categories[]->{_id, name, slug},\n  "dimension": dimensions[_ref == \'').concat(e.dimensionId,"'][0]->{_id, name, price},\n  \"frame\": frames[_ref == '").concat(e.frameId,"'][0]->{_id, name, price}\n}"),n=e=>"*[_type == 'poster' && (count((categories[]->slug)[@ in ".concat(JSON.stringify(e),']) > 0) ][0..3]{\n  _id, name, slug, "images": images[].asset->url\n}'),d=()=>"*[_type == 'popularPoster']{\n  ...reference->{\n  _id, name, slug, \"images\": images[].asset->url\n  }\n}",l=e=>"*[_type == 'poster' && slug == '".concat(e,'\'][0]{\n  _id, name, slug, description,\n  "images": images[].asset->url,\n  "categories": categories[]->{_id, name, slug},\n  "dimensions": dimensions[]->{_id, name, price},\n  "frames": frames[]->{_id, name, price}\n}');class c{async getAllByCategory(e){return await a.fetch(t(e))}async getPopularPosters(){return await a.fetch(d())}async getByCategories(e){return await a.fetch(n(e))}async getAllByCart(e){return await Promise.all(e.map(e=>a.fetch(i(e.cartPoster))))}async getBySlug(e){return await a.fetch(l(e))}}let o=new c},5732:(e,s,r)=>{"use strict";r.d(s,{A:()=>i});var a=r(9827),t=r(709);let i=(0,a.v)()((0,t.Zr)(e=>({cartList:[],add:s=>e(e=>({cartList:[...e.cartList,{cartPoster:s,quantity:1}]})),delete:s=>e(e=>({cartList:e.cartList.filter(e=>!(e.cartPoster._id==s._id&&e.cartPoster.dimensionId==s.dimensionId&&e.cartPoster.frameId==s.frameId))})),update:(s,r)=>e(e=>({cartList:e.cartList.map(e=>e.cartPoster._id==s._id&&e.cartPoster.dimensionId==s.dimensionId&&e.cartPoster.frameId==s.frameId?{cartPoster:s,quantity:r}:e)})),reset:()=>e(()=>({cartList:[]}))}),{name:"cart-storage",storage:(0,t.KU)(()=>localStorage)}))},6813:(e,s,r)=>{"use strict";r.d(s,{A:()=>i});var a=r(8418);class t{isInCart(e,s){return!!s.find(s=>s.cartPoster._id==e._id&&s.cartPoster.dimensionId==e.dimensionId&&s.cartPoster.frameId==e.frameId)}getTotalQuantity(e){return e.map(e=>e.quantity).reduce((e,s)=>e+s,0)}getTotalPrice(e){return(null==e?void 0:e.map(e=>a.A.calculateCartPosterPrice(e.cartPoster,e.quantity)).reduce((e,s)=>e+s,0))||0}}let i=new t},8418:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});class a{calculatePosterPrice(e,s,r){var a,t;return(null===(a=e.dimensions[s])||void 0===a?void 0:a.price)+(null===(t=e.frames[r])||void 0===t?void 0:t.price)}calculateCartPosterPrice(e,s){return(e.dimension.price+e.frame.price)*s}}let t=new a}},e=>{var s=s=>e(e.s=s);e.O(0,[726,678,304,365,173,376,441,517,358],()=>s(8338)),_N_E=e.O()}]);