(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5],{5778:(e,t,r)=>{Promise.resolve().then(r.bind(r,2587))},6967:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(7401).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},4858:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(7401).A)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},767:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(7401).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},3430:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(5155),a=r(3312);function n(){return(0,s.jsx)("section",{className:"py-[250px]",children:(0,s.jsxs)("div",{className:"conteiner flex items-center justify-center flex-col",children:[(0,s.jsx)("h3",{className:"heading-3",children:"Ваша корзина пустая"}),(0,s.jsx)("p",{className:"text-body mt-5",children:"Добавьте товары и оформите заказ"}),(0,s.jsx)(a.$,{asChild:!0,className:"mt-5",size:"lg",children:(0,s.jsx)("a",{href:"/category",className:"text-body-sm font-normal",children:"Перейти в каталог товаров"})})]})})}},2587:(e,t,r)=>{"use strict";r.d(t,{default:()=>j});var s=r(5155),a=r(7871),n=r(5169),i=r(3582),l=r(5732),c=r(6813),d=r(3430),o=r(3011);function m(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("section",{children:(0,s.jsx)("div",{className:"container",children:(0,s.jsx)(o.Qp,{className:"py-10",children:(0,s.jsxs)(o.AB,{children:[(0,s.jsx)(o.J5,{children:(0,s.jsx)(o.w1,{className:"link",href:"/",children:"Главная"})}),(0,s.jsx)(o.tH,{}),(0,s.jsx)(o.J5,{children:(0,s.jsx)(o.tJ,{children:"Корзина"})})]})})})}),(0,s.jsx)("section",{className:"",children:(0,s.jsx)("div",{className:"container",children:(0,s.jsx)("h1",{className:"heading-2 grow border-b-2 border-solid border-main-3",children:"Корзина"})})})]})}var u=r(7401);let p=(0,u.A)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),h=(0,u.A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function x(e){let{quantity:t,onIncrement:r,onDecrement:a,className:n}=e;return(0,s.jsxs)("div",{className:"py-2 px-2 text-body leading-none inline-flex gap-12 items-center relative border-[1px] border-solid rounded-sm w-fit ".concat(n),children:[(0,s.jsx)("button",{disabled:t<=1,onClick:()=>a(),className:"disabled:opacity-40 hover:opacity-80 active:opacity-60 transition-opacity",children:(0,s.jsx)(p,{size:20})}),(0,s.jsx)("span",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:t}),(0,s.jsx)("button",{onClick:()=>r(),className:" hover:opacity-80 active:opacity-60 transition-opacity",children:(0,s.jsx)(h,{size:20})})]})}var g=r(8418),f=r(767);let v=e=>{var t;let{cartRecord:r}=e,{cartPoster:a,quantity:n}=r,{delete:i,update:c}=(0,l.A)(),d={_id:a._id,dimensionId:a.dimension._id,frameId:a.frame._id};return(0,s.jsxs)("div",{className:"grid grid-cols-7 md:gap-[30px] gap-3 pb-5 border-b-2 border-solid border-main-3",children:[(0,s.jsx)("a",{className:"col-span-2",href:"/poster/".concat(a.slug),children:(0,s.jsx)("img",{className:"aspect-square object-cover hover:opacity-80 active:opacity-60",src:null==a?void 0:null===(t=a.images)||void 0===t?void 0:t[0],alt:null==a?void 0:a.name})}),(0,s.jsxs)("div",{className:"col-span-5 flex gap-3",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3 grow",children:[(0,s.jsx)("h4",{className:"md:heading-4",children:(0,s.jsxs)("a",{className:"link",href:"/poster/".concat(a.slug),children:["Постер ",null==a?void 0:a.name]})}),(0,s.jsxs)("p",{className:" space-x-3",children:[(0,s.jsx)("span",{className:"text-[14px] opacity-80",children:"Размер:"}),(0,s.jsx)("span",{children:a.dimension.name})]}),(0,s.jsxs)("p",{className:" space-x-3",children:[(0,s.jsx)("span",{className:"text-[14px] opacity-80",children:"Рамка:"}),(0,s.jsx)("span",{children:a.frame.name})]}),(0,s.jsx)(x,{className:"md:hidden",quantity:n,onIncrement:()=>c(d,n+1),onDecrement:()=>c(d,n-1)}),(0,s.jsxs)("p",{className:"md:heading-4 md:hidden",children:[g.A.calculateCartPosterPrice(a,n)," BYN"]})]}),(0,s.jsxs)("div",{className:"h-full flex flex-col justify-between items-end gap-5",children:[(0,s.jsx)("button",{onClick:()=>i(d),children:(0,s.jsx)(f.A,{})}),(0,s.jsx)(x,{className:"max-md:hidden",quantity:n,onIncrement:()=>c(d,n+1),onDecrement:()=>c(d,n-1)}),(0,s.jsxs)("p",{className:"heading-4 text-main max-md:hidden",children:[g.A.calculateCartPosterPrice(a,n)," BYN"]})]})]})]})};var y=r(7105);let j=()=>{let{cartRecords:e,isLoading:t,isError:r}=(0,i.A)(),{cartList:o}=(0,l.A)();return 0==c.A.getTotalQuantity(o)?(0,s.jsxs)("main",{children:[(0,s.jsx)(m,{}),(0,s.jsx)(d.A,{})]}):t?(0,s.jsxs)("main",{children:[(0,s.jsx)(m,{}),(0,s.jsx)(n.A,{})]}):r?(0,s.jsxs)("main",{children:[(0,s.jsx)(m,{}),(0,s.jsx)(a.A,{})]}):(0,s.jsxs)("main",{children:[(0,s.jsx)(m,{}),(0,s.jsx)("section",{className:"pb-10",children:(0,s.jsxs)("div",{className:"container grid lg:grid-cols-12 gap-[30px] mt-[50px]",children:[(0,s.jsx)("div",{className:"lg:col-span-7 space-y-10",children:null==e?void 0:e.map(e=>(0,s.jsx)(v,{cartRecord:e},e.cartPoster._id+e.cartPoster.dimension._id+e.cartPoster.frame._id))}),(0,s.jsx)(y.A,{className:"lg:col-span-5"})]})})]})}},7105:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var s=r(5155),a=r(3312),n=r(3582),i=r(5732),l=r(4596),c=r(6813);let d=e=>{let{className:t,isCartPage:r=!0}=e,{cartRecords:d}=(0,n.A)(),{cartList:o}=(0,i.A)(),{deliveryType:m}=(0,l.A)(),u=c.A.getTotalQuantity(o),p=c.A.getTotalPrice(d),h=p+m.price;return(0,s.jsxs)("div",{className:"space-y-4 flex flex-col md:p-6 p-4 border-2 border-solid rounded-[5px] bg-white h-fit ".concat(t),children:[(0,s.jsx)("h3",{className:"heading-3 text-main",children:"Ваш заказ"}),(0,s.jsxs)("div",{className:"flex justify-between gap-3 items-baseline",children:[(0,s.jsx)("span",{className:"text-body",children:"Товаров:"}),(0,s.jsx)("span",{className:"heading-4",children:u})]}),(0,s.jsxs)("div",{className:"flex justify-between gap-3 items-baseline",children:[(0,s.jsx)("span",{className:"text-body",children:"Стоимость товаров:"}),(0,s.jsxs)("span",{className:"heading-4",children:[p," BYN"]})]}),(0,s.jsxs)("div",{className:"flex justify-between gap-3 items-baseline",children:[(0,s.jsx)("span",{className:"text-body",children:"Стоимость доставки:"}),(0,s.jsx)("span",{className:"heading-4",children:0==m.price?"Бесплатно":"".concat(m.price," руб")})]}),(0,s.jsxs)("div",{className:"flex justify-between gap-3 heading-3",children:[(0,s.jsx)("span",{children:"Итого:"}),(0,s.jsxs)("span",{children:[h," BYN"]})]}),r?(0,s.jsx)(a.$,{type:"button",asChild:!0,size:"xl",children:(0,s.jsx)("a",{href:"/order",children:"Перейти к оформлению"})}):(0,s.jsx)(a.$,{type:"submit",size:"xl",children:"Оформить заказ"})]})}},3011:(e,t,r)=>{"use strict";r.d(t,{AB:()=>d,J5:()=>o,Qp:()=>c,tH:()=>p,tJ:()=>u,w1:()=>m});var s=r(5155),a=r(2115),n=r(2317),i=r(6967),l=(r(4858),r(1567));let c=a.forwardRef((e,t)=>{let{...r}=e;return(0,s.jsx)("nav",{ref:t,"aria-label":"breadcrumb",...r})});c.displayName="Breadcrumb";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("ol",{ref:t,className:(0,l.cn)("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",r),...a})});d.displayName="BreadcrumbList";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("li",{ref:t,className:(0,l.cn)("inline-flex items-center gap-1.5",r),...a})});o.displayName="BreadcrumbItem";let m=a.forwardRef((e,t)=>{let{asChild:r,className:a,...i}=e,c=r?n.DX:"a";return(0,s.jsx)(c,{ref:t,className:(0,l.cn)("transition-colors hover:text-foreground",a),...i})});m.displayName="BreadcrumbLink";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("span",{ref:t,role:"link","aria-disabled":"true","aria-current":"page",className:(0,l.cn)("font-normal text-foreground",r),...a})});u.displayName="BreadcrumbPage";let p=e=>{let{children:t,className:r,...a}=e;return(0,s.jsx)("li",{role:"presentation","aria-hidden":"true",className:(0,l.cn)("[&>svg]:w-3.5 [&>svg]:h-3.5",r),...a,children:null!=t?t:(0,s.jsx)(i.A,{})})};p.displayName="BreadcrumbSeparator"},3312:(e,t,r)=>{"use strict";r.d(t,{$:()=>d,r:()=>c});var s=r(5155),a=r(2317),n=r(1027),i=r(2115),l=r(1567);let c=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",outlineBold:"border-2 border-primary bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9",xl:"md:py-4 md:px-8 py-3 px-6 rounded-md text-lg"}},defaultVariants:{variant:"default",size:"default"}}),d=i.forwardRef((e,t)=>{let{className:r,variant:n,size:i,asChild:d=!1,...o}=e,m=d?a.DX:"button";return(0,s.jsx)(m,{className:(0,l.cn)(c({variant:n,size:i,className:r})),ref:t,...o})});d.displayName="Button"},7871:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(5155),a=r(3312);function n(e){let{title:t="Страница не найдена"}=e;return(0,s.jsx)("section",{className:"py-[250px]",children:(0,s.jsxs)("div",{className:"conteiner flex items-center justify-center flex-col",children:[(0,s.jsx)("p",{className:"heading-3",children:t}),(0,s.jsx)(a.$,{asChild:!0,className:"mt-5",size:"lg",children:(0,s.jsx)("a",{href:"/",className:"text-body-sm font-normal",children:"Вернуться на главную"})})]})})}},5169:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(5155),a=r(4505);function n(){return(0,s.jsx)("section",{className:"py-[250px]",children:(0,s.jsx)("div",{className:"container flex justify-center",children:(0,s.jsx)(a.A,{className:"animate-spin",size:60})})})}},9712:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=[{name:"Самовывоз",price:0},{name:"Доставка курьером",price:15}]},3582:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(5605),a=r(5732),n=r(547);function i(){let{cartList:e}=(0,a.A)(),{data:t,isLoading:r,isError:i,error:l}=(0,n.I)({queryKey:["cart-list",e.length],queryFn:async()=>await s.A.getAllByCart(e)});return{cartRecords:null==t?void 0:t.map(t=>{var r;return{cartPoster:t,quantity:(null===(r=e.find(e=>t._id==e.cartPoster._id&&t.dimension._id==e.cartPoster.dimensionId&&t.frame._id==e.cartPoster.frameId))||void 0===r?void 0:r.quantity)||1}}),isLoading:r,isError:i,error:l}}},1567:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(3463),a=r(9795);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},5605:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let s=(0,r(7096).UU)({projectId:"b3q2ag62",dataset:"production",useCdn:!0,apiVersion:"2023-05-03"}),a=e=>""==e?"*[_type == 'poster']{\n    _id, name, slug, \"images\": images[].asset->url\n  }":"*[_type == 'poster' && '".concat(e,'\' in categories[]->slug]{\n  _id, name, slug, "images": images[].asset->url\n}'),n=e=>"*[_type == 'poster' && _id == '".concat(e._id,"'\n   && count(dimensions[_ref == '").concat(e.dimensionId,"']) > 0\n   && count(frames[_ref == '").concat(e.frameId,'\']) > 0][0]{\n  _id, name, slug, description,\n  "images": images[].asset->url,\n  "categories": categories[]->{_id, name, slug},\n  "dimension": dimensions[_ref == \'').concat(e.dimensionId,"'][0]->{_id, name, price},\n  \"frame\": frames[_ref == '").concat(e.frameId,"'][0]->{_id, name, price}\n}"),i=e=>"*[_type == 'poster' && (count((categories[]->slug)[@ in ".concat(JSON.stringify(e),']) > 0) ][0..3]{\n  _id, name, slug, "images": images[].asset->url\n}'),l=()=>"*[_type == 'popularPoster']{\n  ...reference->{\n  _id, name, slug, \"images\": images[].asset->url\n  }\n}",c=e=>"*[_type == 'poster' && slug == '".concat(e,'\'][0]{\n  _id, name, slug, description,\n  "images": images[].asset->url,\n  "categories": categories[]->{_id, name, slug},\n  "dimensions": dimensions[]->{_id, name, price},\n  "frames": frames[]->{_id, name, price}\n}');class d{async getAllByCategory(e){return await s.fetch(a(e))}async getPopularPosters(){return await s.fetch(l())}async getByCategories(e){return await s.fetch(i(e))}async getAllByCart(e){return await Promise.all(e.map(e=>s.fetch(n(e.cartPoster))))}async getBySlug(e){return await s.fetch(c(e))}}let o=new d},5732:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(9827),a=r(709);let n=(0,s.v)()((0,a.Zr)(e=>({cartList:[],add:t=>e(e=>({cartList:[...e.cartList,{cartPoster:t,quantity:1}]})),delete:t=>e(e=>({cartList:e.cartList.filter(e=>!(e.cartPoster._id==t._id&&e.cartPoster.dimensionId==t.dimensionId&&e.cartPoster.frameId==t.frameId))})),update:(t,r)=>e(e=>({cartList:e.cartList.map(e=>e.cartPoster._id==t._id&&e.cartPoster.dimensionId==t.dimensionId&&e.cartPoster.frameId==t.frameId?{cartPoster:t,quantity:r}:e)})),reset:()=>e(()=>({cartList:[]}))}),{name:"cart-storage",storage:(0,a.KU)(()=>localStorage)}))},4596:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(9712);let a=(0,r(9827).v)()(e=>({deliveryType:s.A[0],setDeliveryType:t=>e(e=>({...e,deliveryType:t}))}))},6813:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(8418);class a{isInCart(e,t){return!!t.find(t=>t.cartPoster._id==e._id&&t.cartPoster.dimensionId==e.dimensionId&&t.cartPoster.frameId==e.frameId)}getTotalQuantity(e){return e.map(e=>e.quantity).reduce((e,t)=>e+t,0)}getTotalPrice(e){return(null==e?void 0:e.map(e=>s.A.calculateCartPosterPrice(e.cartPoster,e.quantity)).reduce((e,t)=>e+t,0))||0}}let n=new a},8418:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});class s{calculatePosterPrice(e,t,r){var s,a;return(null===(s=e.dimensions[t])||void 0===s?void 0:s.price)+(null===(a=e.frames[r])||void 0===a?void 0:a.price)}calculateCartPosterPrice(e,t){return(e.dimension.price+e.frame.price)*t}}let a=new s},709:(e,t,r)=>{"use strict";function s(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var s;let a=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),n=null!=(s=r.getItem(e))?s:null;return n instanceof Promise?n.then(a):a(n)},setItem:(e,s)=>r.setItem(e,JSON.stringify(s,null==t?void 0:t.replacer)),removeItem:e=>r.removeItem(e)}}r.d(t,{KU:()=>s,Zr:()=>n});let a=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>a(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>a(t)(e)}}},n=(e,t)=>(r,n,i)=>{let l,c={storage:s(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},d=!1,o=new Set,m=new Set,u=c.storage;if(!u)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${c.name}', the given storage is currently unavailable.`),r(...e)},n,i);let p=()=>{let e=c.partialize({...n()});return u.setItem(c.name,{state:e,version:c.version})},h=i.setState;i.setState=(e,t)=>{h(e,t),p()};let x=e((...e)=>{r(...e),p()},n,i);i.getInitialState=()=>x;let g=()=>{var e,t;if(!u)return;d=!1,o.forEach(e=>{var t;return e(null!=(t=n())?t:x)});let s=(null==(t=c.onRehydrateStorage)?void 0:t.call(c,null!=(e=n())?e:x))||void 0;return a(u.getItem.bind(u))(c.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===c.version)return[!1,e.state];if(c.migrate){let t=c.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;let[s,a]=e;if(r(l=c.merge(a,null!=(t=n())?t:x),!0),s)return p()}).then(()=>{null==s||s(l,void 0),l=n(),d=!0,m.forEach(e=>e(l))}).catch(e=>{null==s||s(void 0,e)})};return i.persist={setOptions:e=>{c={...c,...e},e.storage&&(u=e.storage)},clearStorage:()=>{null==u||u.removeItem(c.name)},getOptions:()=>c,rehydrate:()=>g(),hasHydrated:()=>d,onHydrate:e=>(o.add(e),()=>{o.delete(e)}),onFinishHydration:e=>(m.add(e),()=>{m.delete(e)})},c.skipHydration||g(),l||x}},9827:(e,t,r)=>{"use strict";r.d(t,{v:()=>c});var s=r(2115);let a=e=>{let t;let r=new Set,s=(e,s)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=s?s:"object"!=typeof a||null===a)?a:Object.assign({},t,a),r.forEach(r=>r(t,e))}},a=()=>t,n={setState:s,getState:a,getInitialState:()=>i,subscribe:e=>(r.add(e),()=>r.delete(e))},i=t=e(s,a,n);return n},n=e=>e?a(e):a,i=e=>e,l=e=>{let t=n(e),r=e=>(function(e,t=i){let r=s.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return s.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},c=e=>e?l(e):l}},e=>{var t=t=>e(e.s=t);e.O(0,[678,304,365,441,517,358],()=>t(5778)),_N_E=e.O()}]);